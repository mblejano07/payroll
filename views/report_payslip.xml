<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="report_payslip">
        <t t-name="payroll.report_payslip">
            <t t-set="company" t-value="env.company"/>
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page" style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 5px; box-sizing: border-box;">

                            <!-- Company Logo -->
                            <t t-if="o.employee_id.company_id.logo">
                                <table style="width: 100%; text-align: center; margin: 0;">
                                    <tr>
                                        <td style="padding: 5px 0;">
                                            <img t-att-src="image_data_uri(o.employee_id.company_id.logo)" style="max-height: 50pt; max-width: 100%; padding: 5px;" alt="Company Logo"/>
                                        </td>
                                    </tr>
                                </table>
                            </t>

                            <h2 style="text-align: center; font-weight: bold; text-transform: uppercase; margin: 5px 0;">Salary Statement</h2>
                            <p style="text-align: center; font-weight: bold; color: #87CEEB; margin: 5px 0;">PRIVATE AND CONFIDENTIAL</p>

                            <!-- Personal Details -->
                            <h3 style="text-align: left; font-weight: bold; margin: 5px 0;">Personal Details</h3>
                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; border: 2px solid #87CEEB; border-top: 4px solid #87CEEB;">
                                <tr>
                                    <td style="font-weight: bold; padding: 5px; text-align: left;">Name</td>
                                    <td style="padding: 5px;"> <span t-field="o.employee_id"/></td>
                                    <td style="font-weight: bold; padding: 5px;">Designation</td>
                                    <td style="padding: 5px;"> <span t-field="o.employee_id.job_id"/></td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold; padding: 5px;">Date From</td>
                                    <td style="padding: 5px;"> <span t-field="o.date_from"/></td>
                                    <td style="font-weight: bold; padding: 5px;">Date To</td>
                                    <td style="padding: 5px;"> <span t-field="o.date_to"/></td>
                                </tr>
                            </table>

                            <!-- Leave Credit Summary -->
                            <h3 style="text-align: left; font-weight: bold; margin: 5px 0;">Leave Credit Summary</h3>
                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; border: 2px solid #87CEEB; border-top: 4px solid #87CEEB;">
                                <tr>
                                    <td style="font-weight: bold; padding: 5px;">Leave Type</td>
                                    <td style="font-weight: bold; padding: 5px; text-align: right;">Used (Days)</td>
                                    <td style="font-weight: bold; padding: 5px; text-align: right;">Remaining Balance (Days)</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px;">Vacation Leave</td>
                                    <td style="padding: 5px; text-align: right;"><span t-field="o.used_vacation_credits" t-options="{'precision': 2}"/></td>
                                    <td style="padding: 5px; text-align: right;"><span t-field="o.vacation_leave_balance" t-options="{'precision': 2}"/></td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px;">Sick Leave</td>
                                    <td style="padding: 5px; text-align: right;"><span t-field="o.used_sick_credits" t-options="{'precision': 2}"/></td>
                                    <td style="padding: 5px; text-align: right;"><span t-field="o.sick_leave_balance" t-options="{'precision': 2}"/></td>
                                </tr>
                            </table>

                            <!-- Earnings -->
                            <h3 style="text-align: left; font-weight: bold; margin: 5px 0;">Earnings</h3>
                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; border-top: 4px solid #87CEEB;">
                                <thead>
                                    <tr style="background: #f2f2f2; border-bottom: 2px solid #87CEEB;">
                                        <th style="padding: 5px;">Name</th>
                                        <th style="padding: 5px; text-align: right;">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="o.line_ids.filtered(lambda l: l.code and l.category_id.code in ('OT', 'BASIC', 'NP'))" t-as="line">
                                        <td style="padding: 5px;"><span t-field="line.name"/></td>
                                        <td style="padding: 5px; text-align: right;">
                                            <span t-esc="line.total" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold; padding: 5px;">Total Earnings</td>
                                        <td style="font-weight: bold; padding: 5px; text-align: right;">
                                            <span t-esc="sum(line.total for line in o.line_ids if line.code and line.category_id.code in ('OT', 'BASIC', 'NP'))"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <!-- Deductions -->
                            <h3 style="text-align: left; font-weight: bold; margin: 5px 0;">Deductions</h3>
                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; border-top: 4px solid #87CEEB;">
                                <thead>
                                    <tr style="background: #f2f2f2; border-bottom: 2px solid #87CEEB;">
                                        <th style="padding: 5px;">Name</th>
                                        <th style="padding: 5px; text-align: right;">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="o.line_ids.filtered(lambda l: l.code and l.category_id.code in ('DED', 'TAX'))" t-as="line">
                                        <td style="padding: 5px;"><span t-field="line.name"/></td>
                                        <td style="padding: 5px; text-align: right;">
                                            <span t-esc="line.total" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold; padding: 5px;">Total Deductions</td>
                                        <td style="font-weight: bold; padding: 5px; text-align: right;">
                                            <span t-esc="sum(line.total for line in o.line_ids if line.code and line.category_id.code in ('DED', 'TAX'))"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <!-- Loan Deductions -->
                            <h3 style="text-align: left; font-weight: bold; margin: 5px 0;">Other Deductions (Loans)</h3>
                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; border-top: 4px solid #87CEEB;">
                                <thead>
                                    <tr style="background: #f2f2f2; border-bottom: 2px solid #87CEEB;">
                                        <th style="padding: 5px;">Loan Name</th>
                                        <th style="padding: 5px; text-align: right;">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="o.line_ids.filtered(lambda l: l.category_id.code == 'LOAN')" t-as="line">
                                        <td style="padding: 5px;"><span t-field="line.name"/></td>
                                        <td style="padding: 5px; text-align: right;">
                                            <span t-esc="line.total" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold; padding: 5px;">Total Loan Deductions</td>
                                        <td style="font-weight: bold; padding: 5px; text-align: right;">
                                            <span t-esc="sum(line.total for line in o.line_ids if line.category_id.code == 'LOAN')"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <!-- Other Earnings -->
                            <h3 style="text-align: left; font-weight: bold; margin: 5px 0;">Other Earnings</h3>
                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; border-top: 4px solid #87CEEB;">
                                <thead>
                                    <tr style="background: #f2f2f2; border-bottom: 2px solid #87CEEB;">
                                        <th style="padding: 5px;">Name</th>
                                        <th style="padding: 5px; text-align: right;">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="o.line_ids.filtered(lambda l: l.code and l.category_id.code in ('NTAX','BONUS'))" t-as="line">
                                        <td style="padding: 5px;"><span t-field="line.name"/></td>
                                        <td style="padding: 5px; text-align: right;">
                                            <span t-esc="line.total" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold; padding: 5px;">Total Other Earnings</td>
                                        <td style="font-weight: bold; padding: 5px; text-align: right;">
                                            <span t-esc="sum(line.total for line in o.line_ids if line.code and line.category_id.code in ('NTAX','BONUS'))"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <!-- Net Salary -->
                            <h3 style="text-align: right; font-weight: bold;">Net Salary: 
                                <span t-esc="o.net_pay" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                            </h3>

                            <!-- Footer -->
                            <p style="text-align: right; font-weight: bold;">Authorized Signature</p>
                            <p style="text-align: center; font-size: 10px; font-style: italic; margin-top: 20px;">This salary statement is confidential and intended solely for the recipient. Unauthorized disclosure or distribution is strictly prohibited.</p>

                        </div>
                    </t>
                </t>
            </t>
        </t>
    </template>
</odoo>
